<!DOCTYPE html>
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" media="all">
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.indigo-pink.min.css" media="all">
<script src="https://code.getmdl.io/1.3.0/material.min.js"></script>
<script src="/js/set.js"></script>
<link href="/css/status.css" rel="stylesheet" type="text/css" media="all">
<html lang="en">
<head>
    <meta name="viewport" content="width=device-width">
    <meta charset="UTF-8">
    <title>Domotique</title>
</head>


{{define "Roller"}}
   <table>
       <tr class="removeBorders">
           <td width="100px" class="removeBorders">
               <button class="{{.StatusOn}} mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect"
                       onclick="runAction( {{.Device.DomotiqueId}} , '/roller/0/command' ,  'open');">Up
               </button>
           </td>
           <td width="100px" class="removeBorders">
               <button class="{{.StatusStop}} mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect"
                       onclick="runAction( {{.Device.DomotiqueId}} , '/roller/0/command' ,  'stop');">Stop
               </button>
               </br>
               <span id="power_{{.Device.DomotiqueId}}">
                   {{if eq .Device.Power 0.0}}
                    -
                   {{else}}
                   {{.Device.Power}} W
                   {{end}}
               </span>
               </br> {{.StopReason}}
           </td>
           <td width="100px" class="removeBorders">
               <button class="{{.StatusOff}} mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect"
                       onclick="runAction( {{.Device.DomotiqueId}} , '/roller/0/command' ,  'close');">Down
               </button>
           </td>
       </tr>
       <tr class="removeBorders">
           <td colspan="2" width="200px" class="removeBorders">
               <input class="mdl-slider mdl-js-slider" type="range" id="slider{{.Device.DomotiqueId}}"
                      min="0" max="100" value="{{.Device.CurrentPos}}" tabindex="0"
                      onchange="slideDevice({{.Device.DomotiqueId}})">
           </td>
           <td width="100px" class="removeBorders">
               <div id="position_{{.Device.DomotiqueId}}">{{.Device.CurrentPos}}</div>
               </br>
               <div id="lastDirection_{{.Device.DomotiqueId}}">{{.Device.LastDirection}}</div>
           </td>

       </tr>
   </table>
{{end}}


{{define "Radiator"}}
<table>
    <tr class="removeBorders">
        <td width="100px" class="removeBorders">
            <button class=" mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect"
                    onclick="runActionValueChange({{.Device.DomotiqueId}} , '/thermostat/0/command/target_t' ,   +0.5);">UP
            </button>
        </td>
        <td class="removeBorders" style="text-align: center">
            Target <span id="temperatureTarget_{{.Device.DomotiqueId}}">{{.Device.TemperatureTarget}} °C</span>
        </td>
        <td width="100px" class="removeBorders" >
            <button class=" mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect"
                    onclick="runActionValueChange({{.Device.DomotiqueId}},'/thermostat/0/command/target_t',  -0.5);">Down
            </button>
        </td>
    </tr>
</table>
{{end}}


{{define "Switch"}}
<table>
    <tr class="removeBorders">
        <td width="100px" class="removeBorders">
            <button class=" mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect"
                    onclick="runAction({{.Device.DomotiqueId}} , '/relay/0/command' ,  'on');">On
            </button>
        </td>
        <td id="power_{{.Device.DomotiqueId}}" width="100px" class="removeBorders">
            {{if eq .Device.Power 0.0}}
            -
            {{else}}
            {{.Device.Power}} W
            {{end}}
            </br>{{.Device.Status}}
        </td>
        <td width="100px" class="removeBorders">
            <button class=" mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect"
                    onclick="runAction({{.Device.DomotiqueId}},'/relay/0/command', 'off');">Off
            </button>
        </td>
    </tr>
</table>
{{end}}


{{define "Device"}}
    <td class="leftText">{{.Device.Type}}</td>
    {{if eq .Device.NewFirmware true}}
    <td class="leftText" style="color: red">
        {{.Device.Name}} ({{.Device.DomotiqueId}} - <a href="http://{{.Device.DeviceUrl}}" target="_blank">{{.Device.DeviceId}}</a>)
        <button class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect"
                onclick="runAction({{.Device.DomotiqueId}},'/command','update_fw')">Update
        </button>
    </td>
    {{else}}
        <td class="leftText">{{.Device.Name}} ({{.Device.DomotiqueId}} - <a href="http://{{.Device.DeviceUrl}}" target="_blank">{{.Device.DeviceId}}</a>)</br><i>{{.Device.NameRegistered}}</i></td>
    {{end}}
    <td>
        {{if eq .Device.DeviceType ""}}
            {{template "Switch" dict "Device" .Device "Room" .Room}}
        {{ else if eq .Device.DeviceType "ROLLER"}}
            {{template "Roller" dict "Device" .Device "Room" .Room}}
        {{ else if eq .Device.DeviceType "SHTRV"}}
            {{template "Radiator" dict "Device" .Device "Room" .Room}}
        {{ end}}
    </td>


    <td>
        <span id="temperature_{{.Device.DomotiqueId}}">
        {{if eq .Device.Temperature 0.0}}
        -
        {{else}}
        {{.Device.Temperature}} °C
        {{end}}
        </span>
        {{ if ne .Device.Battery 0.0}}
        </br>
        Battery <span id="battery_{{.Device.DomotiqueId}}">{{.Device.Battery}} %</span>
        {{end}}
    </td>
    <td>

    </td>
    </tr>
{{end}}



<body>
<input type="hidden" name="ipPort" id="ipPort" value="{{.IpPort}}"/>
<div id="demo-snackbar-example" class="mdl-js-snackbar mdl-snackbar">
    <div class="mdl-snackbar__text"></div>
    <button class="mdl-snackbar__action" type="button"></button>
</div>

<div class="demo-card-wide mdl-card mdl-shadow--2dp" style=" width: 100%; min-height: 50px">
    <!--    <div class="mdl-card__title">
            <h2 class="mdl-card__title-text">Domotique</h2>
        </div>-->


    <table class="mdl-data-table mdl-js-data-table">
        <thead>
        <tr>
            <td class="centerText">Instant Power</td>
        </tr>
        </thead>
        <tbody>
        <tr>
            <td class="centerText" style="font-size: xxx-large" id="totalpower">{{round2 .Totals.Watts}} Watts</td>
        </tr>
        </tbody>
    </table>

</div>

<div class="demo-card-wide mdl-card mdl-shadow--2dp" style=" width: 100%; min-height: 50px">
    <table class="mdl-data-table mdl-js-data-table">
        <thead>
        <tr>
            <td class="centerText">Heater level</td>
            <td class="centerText">Heater Requested temperature</td>
            <td class="centerText">House temperature</td>
        </tr>
        </thead>
        <tbody>
        <tr>
            {{if .IsHeating}}
            <td class="centerText red"><span class="material-icons">local_fire_department</span></td>
            {{ else }}
            <td class="centerText green"><span class="material-icons">check_circle_outline</span></td>
            {{end}}
            {{ if .IsCorrectTemperature}}
            <td class="centerText green">{{.Temperature_Requested}} &deg;C</td>
            <td class="centerText green">{{.Temperature_Actual}} &deg;C</td>
            {{ else }}
            <td class="centerText red">{{.Temperature_Requested}} &deg;C</td>
            <td class="centerText red">{{.Temperature_Actual}} &deg;C</td>
            {{ end }}
        </tr>

        {{if .IsTemporary}}
        <tr>
            <td>{{.TemporaryLevel}}</td>
            <td colspan="2">{{.Until}}</td>
        </tr>
        {{end}}
        </tbody>
    </table>

</div>

<div class="mdl-tabs mdl-js-tabs mdl-js-ripple-effect">

    <div class="mdl-tabs__tab-bar">
        <a class="mdl-tabs__tab"> <b>R.D.C.</b></a>
        {{range .Rooms}}
        {{if eq .Floor "Rdc"}}
        <a href="#{{.Name}}"            class="mdl-tabs__tab {{.Name}}"             onclick="changeActiveTabTo('{{.Name}}')">{{.Name}}</a>
        {{end}}
        {{end}}
    </div>
    <div class="mdl-tabs__tab-bar">
        <a class="mdl-tabs__tab"> <b>PREMIER</b></a>
        {{range .Rooms}}
        {{if eq .Floor "Premier"}}
        <a href="#{{.Name}}"            class="mdl-tabs__tab {{.Name}}"             onclick="changeActiveTabTo('{{.Name}}')">{{.Name}}</a>
        {{end}}
        {{end}}
    </div>
    <div class="mdl-tabs__tab-bar">
        <a class="mdl-tabs__tab"> <b>ANNEXES</b></a>
        {{range .Rooms}}
        {{if eq .Floor "Annexe"}}
        <a href="#{{.Name}}"            class="mdl-tabs__tab {{.Name}}"             onclick="changeActiveTabTo('{{.Name}}')">{{.Name}}</a>
        {{end}}
        {{end}}
    </div>

    <div class="mdl-tabs__tab-bar">
         <a class="mdl-tabs__tab"> <b>SYSTEME</b></a>
        {{range .Rooms}}
        {{if eq .Floor "Systeme"}}
        <a href="#{{.Name}}"            class="mdl-tabs__tab {{.Name}}"             onclick="changeActiveTabTo('{{.Name}}')">{{.Name}}</a>
        {{end}}
        {{end}}
        <a href="#Zoe"              class="mdl-tabs__tab zoe"               onclick="changeActiveTabTo('zoe')">Zoe</a>
        <a href="#Heating"          class="mdl-tabs__tab heating"           onclick="changeActiveTabTo('heating')">Heating</a>
        <a href="#Logs"             class="mdl-tabs__tab logs"              onclick="changeActiveTabTo('logs')">Logs</a>
    </div>


    {{$Devices := .DevicesNew}}
    {{range .Rooms}}
    <div class="mdl-tabs__panel {{.Name}}" id="{{.Name}}">
        <table class="mdl-data-table mdl-js-data-table">
            <thead>
             </thead>
            <tbody>
            {{$Room := .Name}}
            {{range $Devices}}
            {{with .}}
            {{if eq .Room $Room}}
            <tr>
                {{template "Device" dict "Device" . "Room" $Room}}
            {{end}}
            {{end}}
            {{end}}
            </tbody>
        </table>
    </div>
    {{end}}

    <div class="mdl-tabs__panel informatique" id="Informatique">
        <table class="mdl-data-table mdl-js-data-table">
            <thead>
            <tr>
                <th class="mdl-data-table__cell--non-numeric">Room</th>
                <th class="mdl-data-table__cell--non-numeric">Description</th>
                <th class="mdl-data-table__cell--non-numeric">Type</th>
                <th class="mdl-data-table__cell--non-numeric">On</th>
                <th class="mdl-data-table__cell--non-numeric">Status</th>
                <th class="mdl-data-table__cell--non-numeric">Off</th>
                <th>Power</th>
                <th>°C</th>
                <th class="mdl-data-table__cell--non-numeric">Links</th>
                <th class="mdl-data-table__cell--non-numeric">Voltage</th>
                <th class="mdl-data-table__cell--non-numeric">Device T°</th>
                <th class="mdl-data-table__cell--non-numeric">Over T°</th>
                <th class="mdl-data-table__cell--non-numeric">T° Status</th>
            </tr>
            </thead>
            <tbody>
            {{with .DevicesNew}}
            {{range .}}
            {{if eq .Room "Informatique"}}
            <tr>
                <td class="leftText">{{.Room}}</td>
                {{if eq .NewFirmware true}}
                <td class="leftText" style="color: red">
                    {{.Name}}
                    <button class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect"
                            onclick="runAction({{.DomotiqueId}},'/command','update_fw')">Update
                    </button>
                </td>
                {{else}}
                <td class="leftText">{{.Name}}</td>
                {{end}}
                <td class="leftText">{{.Type}}</td>
                {{if eq .Online true}}
                <td>
                    <button class=" mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect"
                            onclick="runAction({{.DomotiqueId}} , '/relay/0/command' ,  'on');">On
                    </button>
                </td>
                <td  id="status_{{.DomotiqueId}}" >
                </td>
                <td>
                    <button class=" mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect"
                            onclick="runAction({{.DomotiqueId}},'/relay/0/command', 'off');">Off
                    </button>
                </td>
                {{else}}
                <td>OffLine</td>
                <td></td>
                {{end}}
                <td id="power_{{.DomotiqueId}}">
                    {{if eq .Power 0.0}}
                    -
                    {{else}}
                    {{.Power}} W
                    {{end}}
                </td>
                <td id="temperature_{{.DomotiqueId}}">
                    {{if eq .Temperature 0.0}}
                    -
                    {{else}}
                    {{.Temperature}} °
                    {{end}}
                </td>
                <td>
                    {{.DomotiqueId}} - <a href="http://{{.DeviceUrl}}" target="_blank">{{.DeviceId}}</a>
                </td>
                <td id="voltage_{{.DomotiqueId}}">
                    {{if eq .Voltage 0.0}}
                    -
                    {{else}}
                    {{.Voltage}}
                    {{end}}
                </td>
                <td id="deviceTemperature_{{.DomotiqueId}}">
                    {{if eq .DeviceTemperature 0.0}}
                    -
                    {{else}}
                    {{.DeviceTemperature}} °
                    {{end}}
                </td>
                <td id="deviceOverTemperature_{{.DomotiqueId}}">
                    {{if eq .DeviceOverTemperature 0.0}}
                    -
                    {{else}}
                    {{.DeviceOverTemperature}} °
                    {{end}}
                </td>
                <td id="temperatureStatus_{{.DomotiqueId}}">
                    {{.TemperatureStatus}}
                </td>
            </tr>
            {{end}}
            {{end}}
            {{end}}
            </tbody>
        </table>
    </div>

    <div class="mdl-tabs__panel lights" id="Lights">
        <table class="mdl-data-table mdl-js-data-table">
            <thead>
            <tr>
                <th class="mdl-data-table__cell--non-numeric">Room</th>
                <th class="mdl-data-table__cell--non-numeric">Description</th>
                <th class="mdl-data-table__cell--non-numeric">Type</th>
                <th class="mdl-data-table__cell--non-numeric">On</th>
                <th class="mdl-data-table__cell--non-numeric">Status</th>
                <th class="mdl-data-table__cell--non-numeric">Off</th>
                <th>Power</th>
                <th>°C</th>
                <th class="mdl-data-table__cell--non-numeric">Links</th>
                <th class="mdl-data-table__cell--non-numeric">Voltage</th>
                <th class="mdl-data-table__cell--non-numeric">Device T°</th>
                <th class="mdl-data-table__cell--non-numeric">Over T°</th>
                <th class="mdl-data-table__cell--non-numeric">T° Status</th>
            </tr>
            </thead>
            <tbody>
            {{with .DevicesNew}}
            {{range .}}
            {{if eq .Type "Light"}}
            <tr>
                <td class="leftText">{{.Room}}</td>
                {{if eq .NewFirmware true}}
                <td class="leftText" style="color: red">
                    {{.Name}}
                    <button class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect"
                            onclick="runAction({{.DomotiqueId}},'/command','update_fw')">Update
                    </button>
                </td>
                {{else}}
                <td class="leftText">{{.Name}}</td>
                {{end}}
                <td class="leftText">{{.Type}}</td>
                {{if eq .Online true}}
                <td>
                    <button class=" mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect"
                            onclick="runAction({{.DomotiqueId}} , '/relay/0/command' ,  'on');">On
                    </button>
                </td>
                <td  id="status_{{.DomotiqueId}}" >
                </td>
                <td>
                    <button class=" mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect"
                            onclick="runAction({{.DomotiqueId}},'/relay/0/command', 'off');">Off
                    </button>
                </td>
                {{else}}
                <td>OffLine</td>
                <td></td>
                {{end}}
                <td id="power_{{.DomotiqueId}}">
                    {{if eq .Power 0.0}}
                    -
                    {{else}}
                    {{.Power}} W
                    {{end}}
                </td>
                <td id="temperature_{{.DomotiqueId}}">
                    {{if eq .Temperature 0.0}}
                    -
                    {{else}}
                    {{.Temperature}} °
                    {{end}}
                </td>
                <td>
                    {{.DomotiqueId}} - <a href="http://{{.DeviceUrl}}" target="_blank">{{.DeviceId}}</a>
                </td>
                <td id="voltage_{{.DomotiqueId}}">
                    {{if eq .Voltage 0.0}}
                    -
                    {{else}}
                    {{.Voltage}}
                    {{end}}
                </td>
                <td id="deviceTemperature_{{.DomotiqueId}}">
                    {{if eq .DeviceTemperature 0.0}}
                    -
                    {{else}}
                    {{.DeviceTemperature}} °
                    {{end}}
                </td>
               <td id="deviceOverTemperature_{{.DomotiqueId}}">
                    {{if eq .DeviceOverTemperature 0.0}}
                    -
                    {{else}}
                    {{.DeviceOverTemperature}} °
                    {{end}}
                </td>
               <td id="temperatureStatus_{{.DomotiqueId}}">
                    {{.TemperatureStatus}}
                </td>
            </tr>
            {{end}}
            {{end}}
            {{end}}
            </tbody>
        </table>
    </div>

    <div class="mdl-tabs__panel controls" id="Controls">
        <table class="mdl-data-table mdl-js-data-table">
            <thead>
            <tr>
                <th class="mdl-data-table__cell--non-numeric">Room</th>
                <th class="mdl-data-table__cell--non-numeric">Description</th>
                <th class="mdl-data-table__cell--non-numeric">Type</th>
                <th class="mdl-data-table__cell--non-numeric">On</th>
                <th class="mdl-data-table__cell--non-numeric">Status</th>
                <th class="mdl-data-table__cell--non-numeric">Off</th>
                <th>Power</th>
                <th>°C</th>
                <th class="mdl-data-table__cell--non-numeric">Links</th>
                <th class="mdl-data-table__cell--non-numeric">Voltage</th>
                <th class="mdl-data-table__cell--non-numeric">Device T°</th>
                <th class="mdl-data-table__cell--non-numeric">Over T°</th>
                <th class="mdl-data-table__cell--non-numeric">T° Status</th>
            </tr>
            </thead>
            <tbody>
            {{with .DevicesNew}}
            {{range .}}
            {{if eq .Type "Prise"}}
            <tr>
                <td class="leftText">{{.Room}}</td>
                {{if eq .NewFirmware true}}
                <td class="leftText" style="color: red">
                    {{.Name}}
                    <button class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect"
                            onclick="runAction({{.DomotiqueId}},'/command','update_fw')">Update
                    </button>
                </td>
                {{else}}
                <td class="leftText">{{.Name}}</td>
                {{end}}
                <td class="leftText">{{.Type}}</td>
                {{if eq .Online true}}
                <td>
                    <button class=" mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect"
                            onclick="runAction({{.DomotiqueId}} , '/relay/0/command' ,  'on');">On
                    </button>
                </td>
                <td id="status_{{.DomotiqueId}}">
                </td>

                <td>
                    <button class=" mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect"
                            onclick="runAction({{.DomotiqueId}},'/relay/0/command', 'off');">Off
                    </button>
                </td>
                {{else}}
                <td>OffLine</td>
                <td></td>
                {{end}}
                <td id="power_{{.DomotiqueId}}">
                    {{if eq .Power 0.0}}
                    -
                    {{else}}
                    {{.Power}} W
                    {{end}}
                </td>
                <td id="temperature_{{.DomotiqueId}}">
                    {{if eq .Temperature 0.0}}
                    -
                    {{else}}
                    {{.Temperature}} °
                    {{end}}

                </td>
                <td>
                    {{.DomotiqueId}} - <a href="http://{{.DeviceUrl}}" target="_blank">{{.DeviceId}}</a>
                </td>
                <td id="voltage_{{.DomotiqueId}}">
                    {{if eq .Voltage 0.0}}
                    -
                    {{else}}
                    {{.Voltage}}
                    {{end}}
                </td>
                <td id="deviceTemperature_{{.DomotiqueId}}">
                    {{if eq .DeviceTemperature 0.0}}
                    -
                    {{else}}
                    {{.DeviceTemperature}} °
                    {{end}}
                </td>
                <td id="deviceOverTemperature_{{.DomotiqueId}}">
                    {{if eq .DeviceOverTemperature 0.0}}
                    -
                    {{else}}
                    {{.DeviceOverTemperature}} °
                    {{end}}
                </td>
                <td id="temperatureStatus_{{.DomotiqueId}}">
                    {{.TemperatureStatus}}
                </td>

            </tr>
            {{end}}
            {{end}}
            {{end}}
            </tbody>
        </table>
    </div>

    <div class="mdl-tabs__panel sensors" id="Sensors">
        <table class="mdl-data-table mdl-js-data-table">
            <thead>
            <tr>
                <th class="mdl-data-table__cell--non-numeric">Room</th>
                <th class="mdl-data-table__cell--non-numeric">Description</th>
                <th class="mdl-data-table__cell--non-numeric">Type</th>
                <th class="mdl-data-table__cell--non-numeric">Active</th>
                <th class="mdl-data-table__cell--non-numeric">Motion</th>
                <th class="mdl-data-table__cell--non-numeric">Vibration</th>
                <th class="mdl-data-table__cell--non-numeric">Lux</th>
                <th>°C</th>
                <th>Battery</th>
                <th>Id</th>
            </tr>
            </thead>
            <tbody>
            {{with .DevicesNew}}
            {{range .}}
            {{if eq .Type "Climat"}}
            <tr>
                <td class="leftText">{{.Room}}</td>
                <td class="leftText">{{.Name}}</td>
                <td class="leftText">{{.Type}}</td>
                <td class="leftText">{{.Active}}</td>
                <td>{{.Motion}}</td>
                <td>{{.Vibration}}</td>
                <td>{{.Lux}}</td>
                <td id="temperature_{{.DomotiqueId}}">
                    {{if eq .Temperature 0.0}}
                    -
                    {{else}}
                    {{.Temperature}} °
                    {{end}}
                </td>
                <td>{{.Battery}}</td>
                <td>
                    {{.DomotiqueId}} - <a href="http://{{.DeviceUrl}}" target="_blank">{{.DeviceId}}</a>
                </td>
            </tr>
            {{end}}
            {{if eq .Type "Alarm"}}
            <tr>
                <td class="leftText">{{.Room}}</td>
                <td class="leftText">{{.Name}}</td>
                <td class="leftText">{{.Type}}</td>
                <td class="leftText">{{.Active}}</td>
                <td>{{.Motion}}</td>
                <td>{{.Vibration}}</td>
                <td>{{.Lux}}</td>
                <td id="temperature_{{.DomotiqueId}}">
                    {{if eq .Temperature 0.0}}
                    -
                    {{else}}
                    {{.Temperature}} °
                    {{end}}

                </td>
                <td>{{.Battery}}</td>
                <td>
                    {{.DomotiqueId}} - <a href="http://{{.DeviceUrl}}" target="_blank">{{.DeviceId}}</a>
                </td>
            </tr>
            {{end}}
            {{end}}
            {{end}}
            </tbody>
        </table>
    </div>

    <div class="mdl-tabs__panel zoe" id="Zoe">
        <table class="mdl-data-table mdl-js-data-table">
            <thead>
            <tr>
                <th class="mdl-data-table__cell--non-numeric">Room</th>
                <th class="mdl-data-table__cell--non-numeric">Description</th>
                <th class="mdl-data-table__cell--non-numeric">Type</th>
                <th class="mdl-data-table__cell--non-numeric">On</th>
                <th class="mdl-data-table__cell--non-numeric">Status</th>
                <th class="mdl-data-table__cell--non-numeric">Off</th>
                <th>Power</th>
                <th>°C</th>
                <th>Id</th>
            </tr>
            </thead>
            <tbody>
            {{with .Devices}}
            {{range .}}
            {{if eq .Type "Prise"}}
            {{if ne .Source 100 }}
            <tr>

                <td class="leftText">{{.Room}}</td>
                <td class="leftText">{{.Name}}</td>
                <td class="leftText">{{.Type}}</td>
                <td>
                    <button class=" mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect"
                            onclick="toggleDevice({{.DomotiqueId}}, {{.UrlOn}})">On
                    </button>
                </td>
                <td id="status_{{.DomotiqueId}}" >

                </td>

                <td>
                    <button class=" mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect"
                            onclick="toggleDevice({{.DomotiqueId}}, {{.UrlOff}})">Off
                    </button>
                </td>
                <td id="power_{{.DomotiqueId}}">
                    {{if eq .Power 0.0}}
                    -
                    {{else}}
                    {{.Power}}
                    {{end}}
                </td>
                <td id="temperature_{{.DomotiqueId}}">
                    {{if eq .Temperature 0.0}}
                    -
                    {{else}}
                    {{.Temperature}} °
                    {{end}}

                </td>
                <td>
                    {{if eq .Source 100}}
                    {{.DeviceId}}
                    {{end}}
                </td>
            </tr>
            {{end}}
            {{end}}
            {{end}}
            {{end}}
            </tbody>
        </table>
    </div>

    <div class="mdl-tabs__panel logs" id="Logs">
        <h2 style="color: #2e6c80;">Last Update:</h2>
        <table>
            <tbody>
            <tr>
                <td>Date &amp; Time</td>
                <td>{{.UpdateTime}}</td>
            </tr>
            <tr>
                <td>Reconnect</td>
                <td>
                    <button class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect"
                            onclick="runReconnect();">Execute
                    </button>
                </td>
            </tr>
            </tbody>
        </table>
    </div>

    <div class="mdl-tabs__panel heating" id="Heating">
        <table class="mdl-data-table mdl-js-data-table">
            <thead>
            <tr>
                <th class="mdl-data-table__cell--non-numeric">Room</th>
                <th class="mdl-data-table__cell--non-numeric">Description</th>
                <th class="mdl-data-table__cell--non-numeric">Type</th>
                <th class="mdl-data-table__cell--non-numeric">On</th>
                <th class="mdl-data-table__cell--non-numeric">Status</th>
                <th class="mdl-data-table__cell--non-numeric">Off</th>
                <td>Power</th>
                <th>°C</th>
                <th>Id</th>
            </tr>
            </thead>
            <tbody>
            {{with .DevicesNew}}
            {{range .}}
            {{if eq .Type "Climat"}}
            <tr>
            <tr>
                <td class="leftText">{{.Room}}</td>
                {{if eq .NewFirmware true}}
                <td class="leftText" style="color: red">
                    {{.Name}}
                    <button class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect"
                            onclick="runAction({{.DomotiqueId}},'/command','update_fw')">Update
                    </button>
                </td>
                {{else}}
                <td class="leftText">{{.Name}}</td>
                {{end}}
                <td class="leftText">{{.Type}}</td>
                {{if eq .Online true}}
                <td>
                    <button class=" mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect"
                            onclick="runAction({{.DomotiqueId}} , '/relay/0/command' ,  'on');">On
                    </button>
                </td>
                <td id="status_{{.DomotiqueId}}" >
                </td>
                <td>
                    <button class=" mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect"
                            onclick="runAction({{.DomotiqueId}} , '/relay/0/command' ,  'off');">Off
                    </button>
                </td>
                {{else}}
                <td>OffLine</td>
                <td></td>
                {{end}}
                <td id="power_{{.DomotiqueId}}">
                    {{if eq .Power 0.0}}
                    -
                    {{else}}
                    {{.Power}} W
                    {{end}}
                </td>
                <td id="temperature_{{.DomotiqueId}}">
                    {{if eq .Temperature 0.0}}
                    -
                    {{else}}
                    {{.Temperature}} °
                    {{end}}

                </td>
                <td>
                    {{.DomotiqueId}} - <a href="http://{{.DeviceUrl}}" target="_blank">{{.DeviceId}}</a>
                </td>

            </tr>
            {{end}}
            {{end}}
            {{end}}
            </tbody>
        </table>


        <h2 style="color: #2e6c80;">Temporarily force settings:</h2>
        <table>
            <tbody>
            <tr>
                <td>
                    <form>
                        <label for="day">Day</label>
                        <input type="text" name="day" id="day" value=""/>
                        <label for="hour">Hour</label>
                        <input type="text" name="hour" id="hour" value=""/>
                        <button id="clickHigh" type="button" onclick="setTemporary('high');" href="#">High</button>
                        <button id="clickLow" type="button" onclick="setTemporary('low');" href="#">Low</button>
                        <button id="clickMax" type="button" onclick="setTemporary('max');" href="#">Max</button>
                        <button id="clickAway" type="button" onclick="setTemporary('away');" href="#">Away</button>
                        <button id="clickReset" type="button" onclick="setTemporary('reset');" href="#">Reset</button>
                    </form>
                </td>
            </tr>
            </tbody>
        </table>
        <h2 style="color: #2e6c80;">Summary Normal Configuration:</h2>
        <table>
            <tbody>
            <tr>
                <th>Day</th>
                <th>Moment</th>
                <th>Level</th>
                <th>Value</th>
            </tr>
            {{with .NormalValues}}
            {{range .}}
            <tr>
                <td>{{.Day}}</td>
                <td align="right">{{.Moment}}</td>
                <td>{{.LevelName}}</td>
                <td>{{.LevelValue}}</td>
            </tr>
            </tbody>
            {{end}}
            {{end}}
        </table>
    </div>
</div>



</body>
<footer>
</br>
</br>
</br>
</br>
</footer>
</html>
